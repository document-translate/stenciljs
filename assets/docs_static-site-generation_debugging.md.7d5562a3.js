import{_ as s,o as n,c as e,X as a}from"./chunks/framework.319defb2.js";const g=JSON.parse('{"title":"Debugging Static Site Generation","description":"How to debug a prerendering or Static Site Generation step in Stencil","frontmatter":{"description":"How to debug a prerendering or Static Site Generation step in Stencil"},"headers":[],"relativePath":"docs/static-site-generation/debugging.md","filePath":"docs/static-site-generation/debugging.md"}'),o={name:"docs/static-site-generation/debugging.md"},t=a(`<h1 id="debugging-static-site-generation" tabindex="-1">Debugging Static Site Generation <a class="header-anchor" href="#debugging-static-site-generation" aria-label="Permalink to &quot;Debugging Static Site Generation&quot;">​</a></h1><p>Static Site Generation, also known as prerendering, executes your components at build time to generate a snapshot of the rendered styles and markup to be efficiently served to search engines and users on first request.</p><p>Since this step runs in a Node.js process instead of a browser, debugging can&#39;t be done directly in the browser. However, debugging is straightforward using existing Node.js debugging techniques.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The <code>stencil build --prerender</code> command will first build the hydrate script for a NodeJS environment, then prerender the site using the build. For a production build this is probably ideal.</p><p>However, while debugging you may not need to keep rebuilding the hydrate script, but you only need to debug through the prerendering process. Stencil creates a file in <code>dist/hydrate</code> that is used to actually execute your components.</p><p>To only prerender (and avoid rebuilding), you can use the <code>stencil prerender dist/hydrate/index.js</code> command, with the path to the script as a flag.</p><h2 id="tips-for-debugging-prerendering" tabindex="-1">Tips for Debugging Prerendering <a class="header-anchor" href="#tips-for-debugging-prerendering" aria-label="Permalink to &quot;Tips for Debugging Prerendering&quot;">​</a></h2><p>By default, prerendering will start by rendering the homepage, find links within the homepage, and continue to crawl the entire site as it finds more links. While debugging, it might be easier to <em>not</em> crawl every URL in the site, but rather have it only prerender one page. To disable crawling, set the prerender config <code>crawlUrls: false</code>.</p><p>Next, you can use the <code>entryUrls</code> config to provide an array of paths to prerender, rather than starting at the homepage.</p><p>Additionally, console logs that are printed within the runtime are suppressed while prerendering (otherwise the terminal would be overloaded with logs). By setting <code>runtimeLogging: true</code>, the runtime console logs will be printed in the terminal. Below is an example setup for prerender debugging:</p><div class="language-tsx"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// prerender.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">PrerenderConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@stencil/core</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PrerenderConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">crawlUrls</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entryUrls</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/example</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">hydrateOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">_url</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      runtimeLogging</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h2 id="debugging-in-vs-code" tabindex="-1">Debugging in VS Code <a class="header-anchor" href="#debugging-in-vs-code" aria-label="Permalink to &quot;Debugging in VS Code&quot;">​</a></h2><p>We&#39;ve found <a href="https://code.visualstudio.com/docs/editor/debugging" target="_blank" rel="noreferrer">VS Code&#39;s Debugger</a> to be the easiest way to set breakpoints and step through the prerendering process.</p><p>To debug your prerendering process in VS Code, enter the Debug tab and create a new <code>launch.json</code> file with the following contents:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// launch.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.2.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">configurations</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">launch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Prerender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">args</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${workspaceFolder}/node_modules/@stencil/core/bin/stencil</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prerender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${workspaceFolder}/dist/hydrate/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--max-workers=0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--config=\${workspaceFolder}/stencil.config.ts</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">protocol</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">inspector</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>This creates a new debugging configuration using the script that hydrates the app. We&#39;re starting up the <code>stencil prerender</code> command, and providing it a path to where the hydrate script can be found. Next we&#39;re using <code>--max-workers=0</code> so we do not fork numerous processes to each of your CPUs which will make it difficult to debug.</p><h2 id="debugging-in-others" tabindex="-1">Debugging in Others <a class="header-anchor" href="#debugging-in-others" aria-label="Permalink to &quot;Debugging in Others&quot;">​</a></h2><p>To Debug in different tools, follow a similar approach to the command being run in the VS Code configuration, calling the <code>dist/hydrate/index.js</code> script from Node, passing the provided arguments, and setting breakpoints using your tool of choice&#39;s system for breakpoints.</p><h1 id="breakpoints-and-stepping" tabindex="-1">Breakpoints and Stepping <a class="header-anchor" href="#breakpoints-and-stepping" aria-label="Permalink to &quot;Breakpoints and Stepping&quot;">​</a></h1><p>To debug components during prerendering, find the transpiled source of the component in <code>dist/hydrate/index.js</code> and set breakpoints (or use raw <code>debugger</code> statements in your original component source). As the prerendering process runs, your breakpoints will be hit and the current stack context can be evaluated.</p>`,21),l=[t];function p(r,c,i,D,d,y){return n(),e("div",null,l)}const u=s(o,[["render",p]]);export{g as __pageData,u as default};
